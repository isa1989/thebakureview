{% extends 'base.html' %}
{% load static %}
{% block content %}

    <div class="detail-container mt-4">
        <div class="row">
            <div class="col-md-9 mx-auto d-flex flex-column">
                <h2 class="news-title" id="newsTitle" style="width: 85%; margin-bottom: 0;">{{ interviews.title }}</h2>
                <div class="divider"></div>
                <div style="display: flex; justify-content: space-between; align-items: center; width: 80%; margin: 0; padding-top: 5px;">
                    <p class="author" style="font-size: 1.5em; margin: 0;">
                        <a href="{% url 'author_detail' interviews.author %}" style="color: inherit; text-decoration: none;">
                            {{ interviews.author }}
                        </a>
                    </p>
                    <span class="date" style="font-size: 1.2em; white-space: nowrap;">{{ interviews.created_at|date:"d F Y"|lower }}</span>
                </div>
                <div class="image-container">
                    <img src="{{ interviews.image.url }}" alt="{{ interviews.title }}" class="img-fluid news-image">
                </div>
                <p class="news-content">{{ interviews.content|safe }}</p>
            </div>
            <div class="col-md-3 d-flex flex-column archive-container">
                <h2 class="archive-title" id="archiveTitle" style="margin-bottom: 10px;">Arxivimizdən</h2>
                <ul class="list-unstyled">
                    {% for related in related_interviews %}
                    <li class="mb-3 d-flex">
                        <a href="{% url 'interview_detail' related.slug %}" class="archive-link" style="flex: 1; display: flex; flex-direction: column; align-items: flex-start;">
                            <img src="{{ related.image.url }}" alt="{{ related.title }}" class="img-fluid archive-image">
                            <p style="margin-bottom: 0;">{{ related.title }}</p>
                            <p class="author">{{ related.author }}</p>
                        </a>
                    </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>

    <script>
        function alignTitles() {
            const newsTitle = document.getElementById('newsTitle');
            const archiveTitle = document.getElementById('archiveTitle');

            // News title'ın yüksekliğini kontrol et
            const newsTitleHeight = newsTitle.offsetHeight;
            const newsTitleMargin = parseInt(window.getComputedStyle(newsTitle).marginBottom, 10);
            const totalHeight = newsTitleHeight + newsTitleMargin;

            // Eğer news title iki satıra geçmişse
            if (totalHeight > 40) { // 40px yükseklik aşılırsa
                // Archive title'ı aynı hizaya getir
                archiveTitle.style.marginTop = `${totalHeight}px`;
            } else {
                // Normal konumda bırak
                archiveTitle.style.marginTop = '10px'; // varsayılan boşluk
            }
        }

        window.addEventListener('DOMContentLoaded', alignTitles);
        window.addEventListener('resize', alignTitles);
    </script>
{% endblock %}
